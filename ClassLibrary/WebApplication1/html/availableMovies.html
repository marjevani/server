<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   
    <title>סרטים זמינים</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        .gallery{
            /*border-collapse:collapse;*/
        }

        .gallery td {
            padding: 5px;
       
            /*border:1px solid black;*/
            width:200px;
            height:200px;
            /*background-color:white;*/
             
             position:relative;
        }


        #bigTbl {
            border-collapse: collapse;
            margin-top: 30px;
             padding:10px;
        }

        body {
            background-image: url("/images/background.jpg");
            background-attachment: fixed;
        }
        h4{ text-align:center;
                margin:5px;
                padding:5px; /*ממרכז את הכתב*/
                color:white;
                position:relative;
                width:1100px;
                }  
        /*.available td div*/
        .internalDiv{
             width:200px;
            height:250px;
       
         
        }
        /*.smlGallery{
             height:150px;
            position:relative;
        }*/

        /*#smallTbl{
              top:10px;
              position:relative;
        }*/
       img{
            width:100px;
            height:100px;
            margin:5px;
           
       }
       #hello
       {
           margin:5px;
           padding:5px;
            /*width:200px;
            height:200px;*/
            border:1px dashed  black;
            display:inline;
       }
       .avi{
           margin-left:20px;
       }
       /*.head{
           width:1100px;
       }*/
      /*#availableTbl
       {
            width:1100px;
       }*/
       
       .lowerDiv
       {
          text-align: center;
       }
       .adminDiv
       {
          /*text-align: center;*/
          display:inline;
       }
       
    </style>
    <script>
        var user = JSON.parse(localStorage.getItem("user"));
        var numOfAvailableMovies = 13;
        var itemInRow = 5;
        var $spn;

        $(document).ready(function () {

            $spn = document.getElementById("hello");
            $spn.innerHTML = "שלום " + user.name;

            if (user.isAdmin == 1) {
                var $add = $("<button>").text("הוסף סרט");
                $add.click(function () { location.href = "addMovie.html" });
                $("#admin").append($add).attr("class", "adminDiv");
                $spn.innerHTML += ", באפשרותך להזמין סרט או להוסיף סרט חדש";
            }
            else {
                $spn.innerHTML += ",איזה סרט תרצה לראות?";
            }

            var $tbl = $("<table>").attr("class", "available");
            var $tr = $("<tr>");
            var colCount = 0;
            for (var i = 0; i < numOfAvailableMovies; i++, colCount++) {

                if (rowCount == itemInRow) {
                    $tr = $("<tr>");
                    colCount = 0;
                }

                var $td = $("<td>").attr("class", "w3-white");
                var $div = $("<div>").attr("class", "internalDiv");
                var $h2 = $("<h2>").attr("movie-number-name", i + 1).text("שם הסרט:");
                var $spn = $("<span>").attr("movie-number-place", i + 1).html("מקומות פנויים:");
                var $div2 = $("<div>").attr("class", "lowerDiv");
                var $pic = $("<img>").attr({ "src": "/images/first_img.JPG", "movie-number-pic": i + 1 });
                var $btn = $("<button>").text("הזמן כרטיס").click(function () {
                    if (true) //עדכון בDB וקבל אישור שתקין
                    {
                        localStorage.setItem("orderId", "from DB");//מהDB
                        location.href = "successOrder.html"
                    }
                });;
                var $br = $("<br>");

                $div2.append($pic);
                $div2.append($br);
                $div2.append($btn);


                $div.append($h2);
                $div.append($spn);
                $div.append($div2);

                $td.append($div);
                $tr.append($td);
                $tbl.append($tr);
                $("#availableTbl").append($tbl);
            }
        });


    </script>

</head>
<body dir="rtl">
    <br />
    <span class="w3-white" id="hello" ></span>
    <div id="admin"></div>
    <table id="bigTbl" align="center">
        <tr>
            <td colspan=" 5"><h4 class="w3-blue head">סרטים זמינים</h4></td>
        </tr>

        <tr class="gallery">
            <td colspan="5">
                <div class=" w3-text-blue" id="availableTbl">
                    <!--<table class="available" align="center">
                        <tr>
                            <td class="w3-white ">
                                <div class="internalDiv">
                                    <h2 id=""> שם הסרט</h2>
                                    <span id="">מקומות פנויים: </span>
                                     <span id="">כמה מקומות</span>
                                    <div class="lowerDiv">
                                        <img class="pic" src="first_img.JPG" />
                                        <br />
                                        <input type="button" value="הזמן כרטיס" />
                                    </div>
                                </div>
                            </td>

                        </tr>
                    </table>-->
                    
                </div>

            </td>

      




</table>

</body>
</html>
